<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ISSS608 - TakeHomeEx01</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ISSS608</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../HandsOnEx/HandsOnEx01/HandsOnEx01.html">
 <span class="dropdown-text">Hands-on Exercise 01</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HandsOnEx/HandsOnEx02/HandsOnEx02.html">
 <span class="dropdown-text">Hands-on Exercise 02</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">In-class Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercise">    
        <li>
    <a class="dropdown-item" href="../../InClassEx/InClassEx03/InClassEx03.html">
 <span class="dropdown-text">In-class Exercise 03</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Take Home Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercise">    
        <li>
    <a class="dropdown-item" href="../../TakeHomeEx/TakeHomeEx01/TakeHomeEx01.html">
 <span class="dropdown-text">Take Home Exercise 01</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#task" id="toc-task" class="nav-link active" data-scroll-target="#task">Task</a>
  <ul class="collapse">
  <li><a href="#tools-used" id="toc-tools-used" class="nav-link" data-scroll-target="#tools-used">Tools used</a></li>
  <li><a href="#data-used" id="toc-data-used" class="nav-link" data-scroll-target="#data-used">Data Used</a></li>
  <li><a href="#presentation" id="toc-presentation" class="nav-link" data-scroll-target="#presentation">Presentation</a></li>
  </ul></li>
  <li><a href="#cleaning-the-data" id="toc-cleaning-the-data" class="nav-link" data-scroll-target="#cleaning-the-data">Cleaning the data</a>
  <ul class="collapse">
  <li><a href="#importing-the-data" id="toc-importing-the-data" class="nav-link" data-scroll-target="#importing-the-data">Importing the data</a></li>
  <li><a href="#cleaning-up-the-data" id="toc-cleaning-up-the-data" class="nav-link" data-scroll-target="#cleaning-up-the-data">Cleaning up the data</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"><img src="images/image-1570625322.png" class="img-fluid"></a></li>
  <li><a href="#creating-new-fields" id="toc-creating-new-fields" class="nav-link" data-scroll-target="#creating-new-fields">Creating new fields</a></li>
  <li><a href="#exporting-out-from-tableau-prep-builder" id="toc-exporting-out-from-tableau-prep-builder" class="nav-link" data-scroll-target="#exporting-out-from-tableau-prep-builder">Exporting out from Tableau Prep Builder</a></li>
  </ul></li>
  <li><a href="#visualising-the-data" id="toc-visualising-the-data" class="nav-link" data-scroll-target="#visualising-the-data">Visualising the data</a>
  <ul class="collapse">
  <li><a href="#creating-a-trellis-layout" id="toc-creating-a-trellis-layout" class="nav-link" data-scroll-target="#creating-a-trellis-layout">Creating a Trellis Layout</a></li>
  <li><a href="#creating-the-population-visualisaion" id="toc-creating-the-population-visualisaion" class="nav-link" data-scroll-target="#creating-the-population-visualisaion">Creating the population visualisaion</a></li>
  <li><a href="#adding-labels" id="toc-adding-labels" class="nav-link" data-scroll-target="#adding-labels">Adding Labels</a></li>
  <li><a href="#labeling-each-box-of-a-trellis-display-in-tableau" id="toc-labeling-each-box-of-a-trellis-display-in-tableau" class="nav-link" data-scroll-target="#labeling-each-box-of-a-trellis-display-in-tableau">Labeling each box of a Trellis Display in Tableau</a></li>
  </ul></li>
  <li><a href="#creating-a-dashboard" id="toc-creating-a-dashboard" class="nav-link" data-scroll-target="#creating-a-dashboard">Creating a Dashboard</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">TakeHomeEx01</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="task" class="level2">
<h2 class="anchored" data-anchor-id="task">Task</h2>
<p><a href="https://isss608-ay2022-23jan.netlify.app/outline/lesson01_outline#age-sex-pyramid">Age-sex pyramid</a> is an analytical visualisation commonly used by demographers to reveal the structure of population by gender and age group. In this take-home exercise, you are required to reveal the demographic structure of Singapore at planning area level by using age-sex pyramid method. Instead of plotting a single age-sex pyramid, however, you are required to display nine selected planning areas on a single view by using <a href="https://isss608-ay2022-23jan.netlify.app/outline/lesson01_outline#trellis-display">trellis display (also know as small-multiple plot)</a>.</p>
<section id="tools-used" class="level3">
<h3 class="anchored" data-anchor-id="tools-used">Tools used</h3>
<ul>
<li><p>Tableau Prep Builder version 2022.4: Used for data cleaning to removed unnecessary fields and filtering of relevant fields</p></li>
<li><p>Tableau version 2022.4</p></li>
</ul>
</section>
<section id="data-used" class="level3">
<h3 class="anchored" data-anchor-id="data-used">Data Used</h3>
<p><em>Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2022</em> should be used to prepare the analytical visualisation. It is available at <a href="https://www.singstat.gov.sg/find-data/search-by-theme/population/geographic-distribution/latest-data">Department of Statistics, Singapore</a>(in short SingStat).</p>
</section>
<section id="presentation" class="level3">
<h3 class="anchored" data-anchor-id="presentation">Presentation</h3>
<ul>
<li><p>The analytical visualisation would be uploaded onto <a href="https://public.tableau.com/en-us/s/">Tableau Public</a>.</p></li>
<li><p>A write-up of the take-home exercise would be prepared in <strong>Quarto html document</strong> format and published on <a href="https://www.netlify.com/">Netlify</a>.</p></li>
</ul>
</section>
</section>
<section id="cleaning-the-data" class="level2">
<h2 class="anchored" data-anchor-id="cleaning-the-data">Cleaning the data</h2>
<section id="importing-the-data" class="level3">
<h3 class="anchored" data-anchor-id="importing-the-data">Importing the data</h3>
<p>Open up the downloaded dataset in Tableau Prep Builder by dragging the file into the Tableau Prep Builder.</p>
<p><img src="images/image-608098745.png" class="img-fluid"></p>
</section>
<section id="cleaning-up-the-data" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-up-the-data">Cleaning up the data</h3>
<p>As we are only interested in the Planning Zone (PZ), we will uncheck the SZ box. Since the whole dataset is for the year 2022, the field, Time is also irrelevant, so we will also uncheck that.</p>
</section>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"><img src="images/image-1570625322.png" class="img-fluid"></h3>
</section>
<section id="creating-new-fields" class="level3">
<h3 class="anchored" data-anchor-id="creating-new-fields">Creating new fields</h3>
<p>Tableau is unable to sort the Male and Females into two columns as per an Age-Sex Pyramid, hence we would need to create 2 more values for the male and female population respectively and display them separately in Tableau later.</p>
<p><code>Right click on "Sex" column &gt; select "Calculated Field" &gt; "Custom Calculation</code></p>
<p><img src="images/image-467436628.png" class="img-fluid"></p>
<p>In the dialog box that pops up, key in</p>
<p><code>IF [Sex] = 'Males' THEN [Pop] END</code></p>
<p><img src="images/image-114243457.png" class="img-fluid"></p>
<p>Repeat the same process for Females</p>
<p><img src="images/image-362852113.png" class="img-fluid"></p>
<p>We also see that the Age Group consists of underscores as shown below, we will use “edit field” to replace the “_” with spaces instead. Use the following code:</p>
<p><code>Replace([AG],'_',' ')</code></p>
<p><img src="images/image-1652373985.png" class="img-fluid"></p>
<p>There are also some Planning Areas with 0 population, like in Jurong East, Water Catchment areas. These areas would be irrelevant as we want to show the Age-Sex Pyramid for PAs in Singapore. we would now remove those 0 values by using the filter function in Tableau Prep Builder.</p>
<p><code>Right Click on Pop &gt; "Select Filter" &gt; Select "Selcted Values"</code></p>
<p><img src="images/image-858831415.png" class="img-fluid"></p>
<p><code>Select "Exclude" &gt; Check "0"</code></p>
<p><img src="images/image-470823080.png" class="img-fluid"></p>
</section>
<section id="exporting-out-from-tableau-prep-builder" class="level3">
<h3 class="anchored" data-anchor-id="exporting-out-from-tableau-prep-builder">Exporting out from Tableau Prep Builder</h3>
<p>We are now ready to export the cleaned data from Tableau Prep Builder and start on the visualisation in Tableau.</p>
<p><code>Click the + icon next to the dataset and select output</code></p>
<p><img src="images/image-1814753214.png" class="img-fluid"></p>
<p><code>Click on the play button to create and export the file</code></p>
<p><img src="images/image-839398350.png" class="img-fluid"></p>
</section>
</section>
<section id="visualising-the-data" class="level2">
<h2 class="anchored" data-anchor-id="visualising-the-data">Visualising the data</h2>
<p>We will now carry out the visualisation in Tableau. First, we will open the file that was exported from the Tableau Prep Builder just now. It is a “Tableau Hyper” file. Just drag and drop the file into the Tableau window.</p>
<p><img src="images/image-301990455.png" class="img-fluid"></p>
<p>If everything goes well, we will now see the following view.</p>
<p><img src="images/image-359026828.png" class="img-fluid"></p>
<section id="creating-a-trellis-layout" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-trellis-layout">Creating a Trellis Layout</h3>
<p>In order to create a Trellis Layout, we would need to create two Calculated Fields, “Row” and “Column”. This will tell Tableau how many Rows and Columns to visualse the data.</p>
<p><code>Click on the small triangle in the Data Box and select "Create Calculated Field" from the drop down box</code></p>
<p><img src="images/image-100186090.png" class="img-fluid"></p>
<p>Create the following two fields</p>
<p><img src="images/image-1514326330.png" class="img-fluid"></p>
<p><img src="images/image-1312812322.png" class="img-fluid"></p>
<p>After this is done, drag Column, Row, Age Group, Male Population and Female Population into the shelf as shown below</p>
<p><img src="images/image-1417112306.png" class="img-fluid"></p>
</section>
<section id="creating-the-population-visualisaion" class="level3">
<h3 class="anchored" data-anchor-id="creating-the-population-visualisaion">Creating the population visualisaion</h3>
<p>However this doesn’t look quite correct. The reason is because the rows and columns are not calculating based on the Planning Area. to resolve this, we need to drag the PA into the Marks Box and set Rows and Columns to calculate based on PA.</p>
<p><code>Drag PA into Marks Box</code></p>
<p><code>click on small triangle for Columns &gt; select Compute using &gt;select PA</code></p>
<p><code>Repeat for Rows</code></p>
<p><img src="images/image-1924551563.png" class="img-fluid"></p>
<p>We should now end up with the following view. This doesn’t look like an Age-Sex Pyramid yet. We need to set the male x axis to reserve and change the colur.</p>
<p><img src="images/image-2033169086.png" class="img-fluid"></p>
<p><code>Right Click X axis, Male Population and select "Edit Axis"</code></p>
<p><img src="images/image-1310157706.png" class="img-fluid"></p>
<p><code>Check "Reversed"</code></p>
<p><img src="images/image-1564309203.png" class="img-fluid"></p>
<p>The chart is shaping up to look like an Age-Sex Pyramid now. let’s change the colour to make it clearer.</p>
<p><code>Drag "Sex"  into "Color" under the Marks Box</code></p>
<p>We now have the basic visualisation for an Age -Sex Pyramid organised into a Trellis Displpay.</p>
<p><img src="images/image-2041642045.png" class="img-fluid"></p>
</section>
<section id="adding-labels" class="level3">
<h3 class="anchored" data-anchor-id="adding-labels">Adding Labels</h3>
<p>The chart is a bit hard to read. we should add lables showing the population numbers for the Male and Female Populations.</p>
<p><code>Click Labels under Marks Box &gt; Check "Show mark labels"</code></p>
<p><img src="images/image-1782012509.png" class="img-fluid"></p>
<p>Tableau will automatically select a colour to contrast the lables, however it does not zalways work correct due to different display resolutions. If the text is a bit harder to read on your display. we can change the colours for the sex.</p>
<p><code>click on the small triangle in the legend on the right hand side &gt; select "edit Colours" and choose whateever colour u want.</code></p>
<p><img src="images/image-909435535.png" class="img-fluid"></p>
<p><img src="images/image-1467485206.png" class="img-fluid"></p>
<p><img src="images/image-1327522652.png" class="img-fluid"></p>
<p><img src="images/image-1935234517.png" class="img-fluid"></p>
<p><img src="images/image-1154200158.png" class="img-fluid"></p>
<p>The Age-Sex pyramid now shows the gender and population numbers clearly by Age-group, but is still missing the PA name.</p>
</section>
<section id="labeling-each-box-of-a-trellis-display-in-tableau" class="level3">
<h3 class="anchored" data-anchor-id="labeling-each-box-of-a-trellis-display-in-tableau">Labeling each box of a Trellis Display in Tableau</h3>
<p>Labeling Trellis display boxes can be tricky. there is no straightforward way to do it in Tableau. the correct way to do it would be to use a dual axis chart. we would create a new axis and stack it with our existing chart for labeling purpose. First, we create a new axis called “Window Max”. this is done via “create calculated field” again.</p>
<p><img src="images/image-1848560983.png" class="img-fluid"></p>
<p>Next, we create another table called PA Label which will hold the label data</p>
<p><img src="images/image-540903023.png" class="img-fluid"></p>
<p>We will now drag the “Windows Max” dimension on top of the Male Column as shown below</p>
<p><img src="images/image-495053734.png" class="img-fluid"></p>
<p>The Shelf should now look like this</p>
<p><img src="images/image-241144167.png" class="img-fluid"></p>
<p>We now drag the PA Label onto the text box under “Windows Max” in Marks Box</p>
<p><img src="images/image-1776996339.png" class="img-fluid"></p>
<p>The final product would now look like this.</p>
<p><img src="images/image-2145420599.png" class="img-fluid"></p>
<p>We can now tidy the formatting by hiding unwanted headers, adding banding and adjusting the fonts to make the chart more readable before moving on to creating a dashboard</p>
</section>
</section>
<section id="creating-a-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-dashboard">Creating a Dashboard</h2>
<p>First, we set the desired size. i chose “Automatic” however tableau has a wide range fo options to choose from, depending on where you are intending to show the visualisation.</p>
<p><img src="images/image-649046950.png" class="img-fluid"></p>
<p>Next, we drag the Age Sex Pyramid into the blank dashboard</p>
<p><img src="images/image-1247687717.png" class="img-fluid"></p>
<p>It look fine, but we should create a proper header to inform people what the chart is about. we drag the “Text” Object to the top of the dashboard to create the header</p>
<p><img src="images/image-1516849516.png" class="img-fluid"></p>
<p>Finally it should look like this</p>
<p><img src="images/image-726309750.png" class="img-fluid"></p>
</section>
<section id="discussion" class="level2">
<h2 class="anchored" data-anchor-id="discussion">Discussion</h2>
<p>A <strong>population pyramid</strong> (age structure diagram) or “<strong>age-sex pyramid</strong>” is a graphical illustration of the distribution of a population by age groups and sex and is often used to determine the overall age distribution of a population and an indication of the reproductive capabilities. There are generally three types of population pyramid.</p>
<table class="table">
<colgroup>
<col style="width: 41%">
<col style="width: 58%">
</colgroup>
<thead>
<tr class="header">
<th>Trend (Shape)</th>
<th>Characteristics</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Expansive (Pyramid)</td>
<td>High Birthrates and perhaps high mortality rates. The population is replacing faster than it is dying</td>
</tr>
<tr class="even">
<td>Constrictive (Square or inverted pyramid)</td>
<td>Population is living longer, but low birth rates. population is not replacing as fast as it’s dying.</td>
</tr>
<tr class="odd">
<td>Stationary (Pillar)</td>
<td>Birthrates and Mortality rates roughly balance each other.</td>
</tr>
</tbody>
</table>
<p>While Age-sex Pyramids are often used to determine if a country’s population is replacing itself fast enough, it may not be useful to analyse the PA break down in this manner, as it is very common for Singaporean’s to move to another area once they reach certain life milestones. for example, when getting married, when their children reach primary school age, and when they reach retirement age. It might be more insightful to cross reference the age-sex pyramid with the age of the PA (mature / non mature estates). What the pyramids do tell us right now is the breakdown of the age groups in each planning area. this can be relevant for city planners to plan for age appropiate amenities in each PA. for example elderly care facilities in PAs with more elderly and schools in younger PA.</p>
<p>Specific to the 9 most populated areas in Singgapore, we can observe that the population replacement rate is not replacing fast enough, with a constrictive trend in Woodlands, Choa Chu Kang, Hougang, Sengkang, Yishun and Tampines, Bedok and Jurong West presents a nearly inverted inverted pyramid. only Punggol looks like it has an Expansive trend. It is also interesting to note across all the planning areas have a large number of population difference in the 30s range. This could be due to Singaporeans getting married and moving in to this areas. as this coincides with the average Singaporean Age to get married.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>